<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel</title>
    <style>
      body {
        display: flex;
        font-family: Arial, sans-serif;
      }
      .sidebar {
        width: 250px;
        background-color: #333;
        color: white;
        padding: 15px;
      }
      .sidebar h2 {
        text-align: center;
      }
      .sidebar ul {
        list-style: none;
        padding: 0;
      }
      .sidebar ul li {
        margin: 20px 0;
      }
      .sidebar ul li a {
        color: white;
        text-decoration: none;
      }
      .content {
        flex-grow: 1;
        padding: 20px;
      }
      .section {
        display: none;
      }
      .section.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="sidebar">
      <h2>Admin Panel</h2>
      <ul>
        <li><a href="#dashboard">Dashboard</a></li>
        <li><a href="#users">Users</a></li>
        <li><a href="#products">Products</a></li>
        <li><a href="#orders">Orders</a></li>
        <li><a href="#reports">Reports</a></li>
      </ul>
    </div>
    <div class="content">
      <div id="dashboard" class="section active">
        <h2>Dashboard</h2>
        <p>Welcome to the admin panel.</p>
      </div>
      <div id="users" class="section">
        <h2>Users</h2>
        <ul id="users-list"></ul>
      </div>
      <div id="products" class="section">
        <h2>Products</h2>
        <ul id="products-list"></ul>
      </div>
      <div id="orders" class="section">
        <h2>Orders</h2>
        <ul id="orders-list"></ul>
      </div>
    </div>
  </body>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const sections = document.querySelectorAll(".section");
      const navLinks = document.querySelectorAll(".sidebar ul li a");

      navLinks.forEach((link) => {
        link.addEventListener("click", function (event) {
          event.preventDefault();
          const targetSection = document.querySelector(
            this.getAttribute("href")
          );

          sections.forEach((section) => section.classList.remove("active"));
          targetSection.classList.add("active");

          if (this.getAttribute("href") === "#users") {
            fetchUsers();
          } else if (this.getAttribute("href") === "#products") {
            fetchProducts();
          } else if (this.getAttribute("href") === "#orders") {
            fetchOrders();
          }
        });
      });

      async function fetchUsers() {
        try {
          const response = await fetch("http://localhost:5000/api/users");
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          const users = await response.json();
          displayUsers(users);
        } catch (error) {
          console.error("Failed to fetch users:", error);
        }
      }

      function displayUsers(users) {
        const usersList = document.getElementById("users-list");
        usersList.innerHTML = users
          .map((user) => `<li>${user.name} (${user.email})</li>`)
          .join("");
      }

      async function fetchProducts() {
        try {
          const response = await fetch("http://localhost:5000/api/products");
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          const products = await response.json();
          displayProducts(products);
        } catch (error) {
          console.error("Failed to fetch products:", error);
        }
      }

      function displayProducts(products) {
        const productsList = document.getElementById("products-list");
        productsList.innerHTML = products
          .map(
            (product) =>
              `<li>${product.name} - $${product.price} (Stock: ${product.stock})</li>`
          )
          .join("");
      }

      async function fetchOrders() {
        try {
          const response = await fetch("http://localhost:5000/api/orders");
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          const orders = await response.json();
          displayOrders(orders);
        } catch (error) {
          console.error("Failed to fetch orders:", error);
        }
      }

      function displayOrders(orders) {
        const ordersList = document.getElementById("orders-list");
        ordersList.innerHTML = orders
          .map(
            (order) =>
              `<li>Order ID: ${order._id}, Total: $${order.total}, Status: ${order.status}</li>`
          )
          .join("");
      }
    });
  </script>
</html>
